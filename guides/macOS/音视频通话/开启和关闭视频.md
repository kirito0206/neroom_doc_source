本文介绍如何通过 NERoom SDK 开启或关闭本地视频的发送。

## 功能介绍

NERoom SDK 支持通过 `unmuteMyVideo` 和 `muteMyVideo` 开启或关闭本地视频流的采集与上行。

## 注意事项

您需要先调用 `setupLocalVideoCanvas` 方法开启本地视图后才能发布视频流。

## 开启本地视频

### 配置步骤

1. 调用 `getRoomContext` 方法获取房间上下文。调用此方法时，您需要将 `roomUuid` 参数设置为您所加入房间的 ID。
2. 调用 `setupLocalVideoCanvas` 方法设置本地画布。调用此方法时，您需要将 `bSetUp` 参数设置为 true。
3. 调用 `unmuteMyVideo` 方法开启本地视频采集并发布视频流。

### 示例代码

```c++
auto context = m_pRoomKit->getRoomService()->getRoomContext(roomUuid);
if(context){
    context->getRtcController()->setupLocalVideoCanvas(true);
    context->getRtcController()->unmuteMyVideo([this](int code, const std::string& msg){
    });
}
```
## 关闭本地视频

### 配置步骤

1. 调用 `getRoomContext` 方法获取房间上下文。调用此方法时，您需要将 `roomUuid` 参数设置为您所加入房间的 ID。
2. 调用 `setupLocalVideoCanvas` 方法取消设置本地画布。调用此方法时，您需要将 `bSetUp` 参数设置为 false。
3. 调用 `muteMyVideo` 方法关闭本地视频采集。

### 示例代码

```c++
auto context = m_pRoomKit->getRoomService()->getRoomContext(roomUuid);
if(context){
    context->getRtcController()->setupLocalVideoCanvas(false);
    context->getRtcController()->muteMyVideo([this](int code, const std::string& msg){
    });
} 
```

## 关闭房间内其他成员的视频

### 注意事项

您可以在云信控制台上配置某角色是否具备关闭房间内其他成员的视频的权限，只有具备该权限的角色才可以执行此操作。

### 配置步骤

1. 加入房间后，调用 `getRoomContext` 方法获取房间上下文。

    调用此方法时，您需要将 roomUid 设置为您所加入房间的 ID。

2. 调用 `muteMemberVideo` 方法，关闭房间中某个成员的视频。

### 示例代码

```c++
auto context = m_pRoomKit->getRoomService()->getRoomContext(roomUuid);
if(context){
    std::string userUuid = "123456";
    context->getRtcController()->muteMemberVideo(userUuid, [this](int code, const std::string& msg) {
    });
}
```

## 打开房间内其他成员的视频

### 注意事项

您可以在云信控制台上配置某角色是否具备打开房间内其他成员的视频的权限，只有具备该权限的角色才可以执行此操作。

### 配置步骤

1. 加入房间后，调用 `getRoomContext` 方法获取房间上下文。

    调用此方法时，您需要将 roomUid 设置为您所加入房间的 ID。

2. 调用 `setupRemoteVideoCanvas` 方法设置远端成员画布。

3. 调用 `unmuteMemberVideo` 方法，打开房间中某个成员的视频。
    
    调用此方法时，您需要将 `targetUid` 设置为待打开视频的成员的 ID。一次只允许传入一个 uid。

### 示例代码

```c++
auto context = m_pRoomKit->getRoomService()->getRoomContext(roomUuid);
if(context){
    std::string userUuid = "123456";
    context->getRtcController()->unmuteMemberVideo(userUuid, [this](int code, const std::string& msg) {
    });
}
```

## API 参考

| 方法 | 功能描述 |
|:--|:--|
| [`getRoomContext`](https://doc.yunxin.163.com/neroom/references/pc/doxygen/Latest/zh/html/classneroom_1_1_i_n_e_room_service.html#a4dc236451ad8b012c4c4b2242c515905) | 获取房间上下文 |
| [`muteMyVideo`](https://doc.yunxin.163.com/neroom/references/pc/doxygen/Latest/zh/html/classneroom_1_1_i_n_e_room_rtc_controller.html#aacccd756bfe5ec1e5964dadbbc1c9d75) | 关闭本地视频 |
| [`unmuteMyVideo`](https://doc.yunxin.163.com/neroom/references/pc/doxygen/Latest/zh/html/classneroom_1_1_i_n_e_room_rtc_controller.html#a571b3148f55e14c34a2820516b85eef8) | 打开本地视频 |
| [`setupLocalVideoCanvas`](https://doc.yunxin.163.com/neroom/references/pc/doxygen/Latest/zh/html/classneroom_1_1_i_n_e_preview_room_rtc_controller.html#a36d93494301cc257997024176e0d515c) | 设置本地视图 |
| [`muteMemberVideo`](https://doc.yunxin.163.com/neroom/references/pc/doxygen/Latest/zh/html/classneroom_1_1_i_n_e_room_rtc_controller.html#a7e442f2c0486ed70ab833795f5809a0d) | 关闭房间内某个成员的视频 |
| [`unmuteMemberVideo`](https://doc.yunxin.163.com/neroom/references/pc/doxygen/Latest/zh/html/classneroom_1_1_i_n_e_room_rtc_controller.html#ad2ef991bb1b6b0c7d5d8f28f1aab346b) | 打开房间内某个成员的视频 |
| [`setupRemoteVideoCanvas`](https://doc.yunxin.163.com/neroom/references/pc/doxygen/Latest/zh/html/classneroom_1_1_i_n_e_room_rtc_controller.html#ab4327dc0dbd845b4b0d0a8330024a0f6) | 设置远端成员画布 | 