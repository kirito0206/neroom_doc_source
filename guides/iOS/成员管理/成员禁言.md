
本文将介绍如何使用 NERoom SDK 实现对房间内的指定成员进行禁言，并禁用音频和视频功能。

## 前提条件

- 已在控制台为指定成员配置成员禁言权限。关于如何设置角色权限，参见 [如何修改角色的权限](https://doc.yunxin.163.com/neroom/concept/DQzNTEwMDE?platform=client#修改角色权限)。

## 成员禁言

房间创建者或管理员可以通过 [`banMemberChat`](https://doc.yunxin.163.com/neroom/references/iOS/jazzy/Latest/zh/html/Classes/NERoomChatController.html#/c:@M@NERoomKit@objc(cs)NERoomChatController(im)banMemberChatWithUserUuid:duration:notifyExt:callback:) 接口对房间内指定成员禁言。成员禁言没有时间限制。

成员禁言后，将触发 [`onRoomChatBanStateChanged`](https://doc.yunxin.163.com/neroom/references/iOS/jazzy/Latest/zh/html/Protocols/NERoomListener.html#/c:@M@NERoomKit@objc(pl)NERoomListener(im)onRoomChatBanStateChangedWithBanned:notifyExt:operateBy:) 事件回调。

示例代码如下：

``` oc
//self.context 是加入房间后获取到的上下文对象
//方法调用
[self.context.chatController
        banMemberChatWithUserUuid:@"userUuid"
                         duration:100
                        notifyExt:@"透传消息"
                         callback:^(NSInteger code, NSString *_Nullable msg, id _Nullable obj) {
                           if (code == 0) {
                             NSLog(@"房间管理:成员禁言了");
                           } else {
                             NSLog(@"房间管理:成员禁言失败了");
                           }
                         }];

//事件回调
- (void)onMemberChatBanStateChangedWithMember:(NERoomMember *)member
                                       banned:(BOOL)banned
                                     duration:(int64_t)duration
                                    notifyExt:(NSString *)notifyExt
                                    operateBy:(NERoomMember *)operateBy {
  NSLog(@"用户聊天禁言状态发生变更");
}

```

如果需要解除成员禁言，可调用 [`unbanMemberChat`](https://doc.yunxin.163.com/neroom/references/iOS/jazzy/Latest/zh/html/Classes/NERoomChatController.html#/c:@M@NERoomKit@objc(cs)NERoomChatController(im)unbanMemberChatWithUserUuid:notifyExt:callback:) 接口。解除成员禁言后，触发 [`onMemberChatBanStateChanged`](https://doc.yunxin.163.com/neroom/references/iOS/jazzy/Latest/zh/html/Protocols/NERoomListener.html#/c:@M@NERoomKit@objc(pl)NERoomListener(im)onMemberChatBanStateChangedWithMember:banned:duration:notifyExt:operateBy:) 事件回调。

## 禁用音频功能

房间创建者或管理员也可以通过 [`banMemberAudio`](https://doc.yunxin.163.com/neroom/references/iOS/jazzy/Latest/zh/html/Classes/NERoomRtcController.html#/c:@M@NERoomKit@objc(cs)NERoomRtcController(im)banMemberAudioWithUserUuid:duration:notifyExt:callback:) 接口设置房间内指定成员禁止开启麦克风。

成员禁止开启音频后，将触发 [`onMemberAudioBanStateChanged`](https://doc.yunxin.163.com/neroom/references/iOS/jazzy/Latest/zh/html/Protocols/NERoomListener.html#/c:@M@NERoomKit@objc(pl)NERoomListener(im)onMemberAudioBanStateChangedWithMember:banned:duration:notifyExt:operateBy:) 事件回调，以及如果有成员音频发生变更(开麦 -> 关麦) [`onMemberAudioMuteChanged`](https://doc.yunxin.163.com/neroom/references/iOS/jazzy/Latest/zh/html/Protocols/NERoomListener.html#/c:@M@NERoomKit@objc(pl)NERoomListener(im)onMemberAudioMuteChangedWithMember:mute:operateBy:) 事件回调

示例代码如下：

```oc
//self.context 是加入房间后获取到的上下文对象
//方法调用
[self.context.rtcController
        banMemberAudioWithUserUuid:@"userUuid"
                          duration:100 
                         notifyExt:@"透传消息"
                          callback:^(NSInteger code, NSString *_Nullable msg, id _Nullable obj) {
                            if (code == 0) {
                              NSLog(@"房间管理:成员禁音了");
                            } else {
                              NSLog(@"房间管理:成员禁音失败了");
                            }
                          }];

//事件回调
- (void)onMemberAudioBanStateChangedWithMember:(NERoomMember *)member
                                        banned:(BOOL)banned
                                      duration:(int64_t)duration
                                     notifyExt:(NSString *)notifyExt
                                     operateBy:(NERoomMember *)operateBy {
  NSLog(@"用户音频禁言状态发生变更");
}                      
                          
- (void)onMemberAudioMuteChangedWithMember:(NERoomMember *)member
                                      mute:(BOOL)mute
                                 operateBy:(NERoomMember *)operateBy {
  NSLog(@"用户音频状态发生变更");
}

```

如果需要解除禁用麦克风，可调用 [`unbanMemberAudio`](https://doc.yunxin.163.com/neroom/references/iOS/jazzy/Latest/zh/html/Classes/NERoomRtcController.html#/c:@M@NERoomKit@objc(cs)NERoomRtcController(im)unbanMemberAudioWithUserUuid:notifyExt:callback:) 接口。解除后，触发 [`onMemberAudioBanStateChanged`](https://doc.yunxin.163.com/neroom/references/iOS/jazzy/Latest/zh/html/Protocols/NERoomListener.html#/c:@M@NERoomKit@objc(pl)NERoomListener(im)onMemberAudioBanStateChangedWithMember:banned:duration:notifyExt:operateBy:) 事件回调。

## 禁用视频功能

房间创建者或管理员也可以通过 [`banMemberVideo`](https://doc.yunxin.163.com/neroom/references/iOS/jazzy/Latest/zh/html/Classes/NERoomRtcController.html#/c:@M@NERoomKit@objc(cs)NERoomRtcController(im)banMemberVideoWithUserUuid:duration:notifyExt:callback:) 接口设置房间内所有成员禁止开启视频。

成员禁止开启视频后，将触发 [`onMemberVideoBanStateChanged`](https://doc.yunxin.163.com/neroom/references/iOS/jazzy/Latest/zh/html/Protocols/NERoomListener.html#/c:@M@NERoomKit@objc(pl)NERoomListener(im)onMemberVideoBanStateChangedWithMember:banned:duration:notifyExt:operateBy:) 事件回调, 以及如果有成员视频发生变更(开视频 -> 关视频) [`onMemberVideoMuteChanged`](https://doc.yunxin.163.com/neroom/references/iOS/jazzy/Latest/zh/html/Protocols/NERoomListener.html#/c:@M@NERoomKit@objc(pl)NERoomListener(im)onMemberVideoMuteChangedWithMember:mute:operateBy:) 事件回调。

示例代码如下：

```oc
//self.context 是加入房间后获取到的上下文对象
//方法调用

[self.context.rtcController
        banMemberVideoWithUserUuid:@"userUuid"
                          duration:100
                         notifyExt:@"透传信息"
                          callback:^(NSInteger code, NSString *_Nullable msg, id _Nullable obj) {
                            if (code == 0) {
                              NSLog(@"房间管理:成员禁视了");
                            } else {
                              NSLog(@"房间管理:成员禁视失败了");
                            }
                          }];
//事件回调
- (void)onMemberVideoBanStateChangedWithMember:(NERoomMember *)member
                                        banned:(BOOL)banned
                                      duration:(int64_t)duration
                                     notifyExt:(NSString *)notifyExt
                                     operateBy:(NERoomMember *)operateBy {
    NSLog(@"用户视频禁言状态发生变更");
}

- (void)onMemberVideoMuteChangedWithMember:(NERoomMember *)member
                                      mute:(BOOL)mute
                                 operateBy:(NERoomMember *)operateBy {
  NSLog(@"用户视频状态发生变更");
}
```

如果需要解除禁用摄像头，可调用 [`unbanMemberVideo`](https://doc.yunxin.163.com/neroom/references/iOS/jazzy/Latest/zh/html/Classes/NERoomRtcController.html#/c:@M@NERoomKit@objc(cs)NERoomRtcController(im)unbanMemberVideoWithUserUuid:notifyExt:callback:) 接口。解除后，触发 [`onMemberVideoBanStateChanged`](https://doc.yunxin.163.com/neroom/references/iOS/jazzy/Latest/zh/html/Protocols/NERoomListener.html#/c:@M@NERoomKit@objc(pl)NERoomListener(im)onMemberVideoBanStateChangedWithMember:banned:duration:notifyExt:operateBy:) 事件回调。