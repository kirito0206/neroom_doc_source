本文介绍通过 NERoom SDK 实现删除房间功能的方法。删除房间后，房间内所有成员被移出房间。

## 注意事项

- PK 直播房间的保留时长最多为 24 小时，超过 24 小时，NERoom Server会自动删除该房间。
- 其他业务场景中，房间的保留时长最多为 16 小时，超过 16 小时，NERoom Server会自动删除该房间。
- 如果您需要延长默认的房间保留时长，请联系网易云信商务经理。
- 您可以在云信控制台上配置某角色是否具备删除房间的权限，只有具备该权限的角色才可以执行此操作。

## 功能原理

用户在删除房间时，NERoom Server 会根据模板 ID 和角色 ID 查看该角色是否具备相应操作的权限。例如：角色 ID 为 host 的用户，执行删除房间时，权限校验的流程如下图所示。

![删除房间的功能原理.png](https://yx-web-nosdn.netease.im/common/935c1ae9f0330889787bc1e59f2b890d/删除房间的功能原理.png)

## 配置步骤

1. 调用 `getRoomContext` 接口获取房间上下文。
    
    调用此方法时，您需要将 `roomUuid` 设置为您所加入房间的 ID。

2. 调用 `endRoom` 接口删除房间。

    ```dart
    Future<VoidResult> endRoom();
    ```

3. 删除房间成功后，会触发 `NERoomEventCallback` 协议中的 `roomEnd` 回调方法。

## 示例代码

实现删除房间功能的示例代码如下：

```dart
NERoomService roomService = NERoomKit.instance.roomService;
NERoomContext? roomContext = roomService.getRoomContext(roomUuid);
roomContext?.endRoom().then((result){
  if(result.isSuccess()){
    debugPrint('endRoom success');
  }else{
    debugPrint('endRoom error code:${result.code},msg:${result.msg}');
  }
});
```

## API 参考

| 方法 | 功能描述 |
|:--|:--|
| [`endRoom`](https://pub.dev/documentation/netease_roomkit/latest/netease_roomkit/NERoomContext/endRoom.html) | 删除房间 |