本文介绍如何通过 NERoom SDK 开启或关闭视频，包括本人的视频或房间内其他成员的视频。

## 注意事项

发布视频流之前，请先调用 `NERoomUserVideoView` 设置本地视图。

## 开启本地视频

### 配置步骤

1. 调用 `getRoomContext` 方法获取房间上下文。

    调用此方法时，您需要将 `roomUuid` 设置为您所加入房间的 ID。

2. 调用 `NERoomUserVideoView` 方法设置本地画布。参考 加入和退出音视频房间内的设置视频流画布

3. 调用 `unmuteMyVideo` 方法开启本地视频采集并发布视频流。

### 示例代码

```dart
NERoomService roomService = NERoomKit.instance.roomService;
NERoomContext? roomContext = roomService.getRoomContext(roomUuid);
roomContext?.rtcController.unmuteMyVideo().then((result){
  if(result.isSuccess()){
    debugPrint('unmuteMyVideo success');
  }else{
    debugPrint('unmuteMyVideo error code ${result.code},msg:${result.msg}');
  }
});
```

## 关闭本地视频

### 配置步骤

1. 调用 `getRoomContext` 方法获取房间上下文。

    调用此方法时，您需要将 `roomUuid` 设置为您所加入房间的 ID。

2. 调用 `muteMyVideo` 方法关闭本地视频采集。

### 示例代码

```dart
NERoomService roomService = NERoomKit.instance.roomService;
NERoomContext? roomContext = roomService.getRoomContext(roomUuid);
roomContext?.rtcController.muteMyVideo().then((result){
  if(result.isSuccess()){
    debugPrint('muteMyVideo success');
  }else{
    debugPrint('muteMyVideo error code ${result.code},msg:${result.msg}');
  }
});
```
## 关闭房间内其他成员的视频

### 注意事项

您可以在云信控制台上配置某角色是否具备关闭房间内其他成员的视频的权限，只有具备该权限的角色才可以执行此操作。

### 配置步骤

1. 调用 `getRoomContext` 方法获取房间上下文。

    调用此方法时，您需要将 `roomUuid` 设置为您所加入房间的 ID。

2. 调用 `muteMemberVideo` 方法，关闭房间中某个成员的视频。

    调用此方法时，您需要将 `targetUid` 设置为待关闭视频的成员的 ID。一次只允许传入一个 uid。

### 示例代码

```dart
String targetUid = 'targetUid';
NERoomService roomService = NERoomKit.instance.roomService;
NERoomContext? roomContext = roomService.getRoomContext(roomUuid);
roomContext?.rtcController.muteMemberVideo(targetUid).then((result){
  if(result.isSuccess()){
    debugPrint('muteMemberVideo success');
  }else{
    debugPrint('muteMemberVideo error code ${result.code},msg:${result.msg}');
  }
});
```

## 打开房间内其他成员的视频

### 注意事项

您可以在云信控制台上配置某角色是否具备打开房间内其他成员的视频的权限，只有具备该权限的角色才可以执行此操作。

### 配置步骤

1. 调用 `getRoomContext` 方法获取房间上下文。

    调用此方法时，您需要将 `roomUuid` 设置为您所加入房间的 ID。

2. 调用 `NERoomUserVideoView` 方法设置远端成员画布。参考 加入和退出音视频房间内的设置视频流画布。

3. 调用 `unmuteMemberVideo` 方法，打开房间中某个成员的视频。

   调用此方法时，您需要将 `targetUid` 设置为待打开视频的成员的 ID。一次只允许传入一个 uid。

### 示例代码

```dart
String targetUid = 'targetUid';
NERoomService roomService = NERoomKit.instance.roomService;
NERoomContext? roomContext = roomService.getRoomContext(roomUuid);
roomContext?.rtcController.unmuteMemberVideo(targetUid).then((result){
  if(result.isSuccess()){
    debugPrint('unmuteMemberAudio success');
  }else{
    debugPrint('unmuteMemberAudio error code ${result.code},msg:${result.msg}');
  }
});
```

## API 参考

| 方法 | 功能描述 |
|:--|:--|
| [`getRoomContext`](https://pub.dev/documentation/netease_roomkit/latest/netease_roomkit/NERoomService/getRoomContext.html) | 根据 roomUuid 获取 RoomContext 实例 | 
| [`joinRoom`](https://pub.dev/documentation/netease_roomkit/latest/netease_roomkit/NERoomService/joinRoom.html) | 加入 NERoom 的房间 |
| [`NERoomUserVideoView`](https://pub.dev/documentation/netease_roomkit/latest/netease_roomkit/NERoomUserVideoView-class.html) | 设置画布视图 |
| [`muteMyVideo`](https://pub.dev/documentation/netease_roomkit/latest/netease_roomkit/NERoomRtcController/muteMyVideo.html) | 关闭本地视频 |
| [`unmuteMyVideo`](https://pub.dev/documentation/netease_roomkit/latest/netease_roomkit/NERoomRtcController/unmuteMyVideo.html) | 打开本地视频 |
| [`muteMemberVideo`](https://pub.dev/documentation/netease_roomkit/latest/netease_roomkit/NERoomRtcController/muteMemberVideo.html) | 关闭房间内某个成员的视频 |
| [`unmuteMemberVideo`](https://pub.dev/documentation/netease_roomkit/latest/netease_roomkit/NERoomRtcController/unmuteMemberVideo.html) | 打开房间内某个成员的视频 |