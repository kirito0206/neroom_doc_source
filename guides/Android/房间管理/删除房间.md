本文介绍通过 NERoom SDK 实现删除房间功能的方法。删除房间后，房间内所有成员被移出房间。

## 注意事项

<style>
table th:first-of-type {
    width: 35%;
}
</style>

- PK 直播房间的保留时长最多为 24 小时，超过 24 小时，NERoom Server 会自动删除该房间。
- 其他业务场景中，房间的保留时长最多为 16 小时，超过 16 小时，NERoom Server 会自动删除该房间。
- 如果您需要延长默认的房间保留时长，请联系网易云信商务经理。
- 您可以在 [网易云信控制台](https://app.yunxin.163.com/global/home) 上配置某角色是否具备删除房间的权限，只有具备该权限的角色才可以执行此操作。

## 功能原理

用户在删除房间时，NERoom Server 会根据模板 ID 和角色 ID 查看该角色是否具备相应操作的权限。例如：角色 ID 为 host 的用户，执行删除房间时，权限校验的流程如下图所示。

<img alt="删除房间的功能原理.png" src="https://yx-web-nosdn.netease.im/common/935c1ae9f0330889787bc1e59f2b890d/删除房间的功能原理.png" style="width:60%;border: 1px solid #BFBFBF;">

## 配置步骤

1. 调用 `getRoomContext` 接口获取房间上下文。

    调用此方法时，您需要将 roomUuid 设置为您所加入房间的 ID。
2. 调用 [`endRoom`](https://doc.yunxin.163.com/neroom/references/android/dokka/Latest/zh/html/com/netease/yunxin/kit/roomkit/api/NERoomContext.html#endRoom(Boolean,NECallback)) 接口删除房间。
    ```Kotlin
    fun endRoom(callback: NECallback<Unit>)
    ```
3. 删除房间成功后，会触发 `NERoomListener` 协议中的 `onRoomEnded` 回调方法。

## 示例代码

实现删除房间功能的示例代码如下：

```Java
NERoomService roomService = NERoomKit.getInstance().getService(NERoomService.class);
NERoomContext roomContext = roomService.getRoomContext(roomUuid);
if (roomContext!=null){
    roomContext.endRoom(new NECallback2<Unit>() {
        @Override
        public void onSuccess(@Nullable Unit unit) {
            super.onSuccess(unit);
            Log.d(TAG,"success");
        }

        @Override
        public void onError(int code, @Nullable String message) {
            super.onError(code, message);
            Log.d(TAG,"error");
        }
    });
}
```

## API 参考

| **方法** | **功能描述** |
| :-- | :-- |
| [`endRoom`](https://doc.yunxin.163.com/neroom/references/android/dokka/Latest/zh/html/com/netease/yunxin/kit/roomkit/api/NERoomContext.html#endRoom(Boolean,NECallback)) | 删除房间 |