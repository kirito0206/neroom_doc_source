在视频会议或在线教育等场景中，主讲人或老师需要在开播前预览本地视频画面。本文介绍如何通过 NERoom SDK 启用或关闭视频画面预览功能，以及如何切换摄像头。

## 设置本地视图并开启预览

### 配置步骤

1. 调用 `previewRoom` 接口获取房间预览上下文。
2. 调用 `setupLocalVideoRender` 方法设置本地视图。
3. 调用 `startPreview` 方法开启视频预览。

### 示例代码

```Java
NEPreviewRoomContext previewRoomContext =null;
NERoomVideoView videoView=findViewById(R.id.videoView);
startPreview();
private void startPreview(){
    NERoomService roomService = NERoomKit.getInstance().getService(NERoomService.class);
    roomService.previewRoom(new NEPreviewRoomParams(), new NEPreviewRoomOptions(), new NECallback2<NEPreviewRoomContext>() {
        @Override
        public void onSuccess(@Nullable NEPreviewRoomContext nePreviewRoomContext) {
            super.onSuccess(nePreviewRoomContext);

            previewRoomContext.getPreviewController().startPreview(videoView, new NECallback2<Unit>() {
                @Override
                public void onSuccess(@Nullable Unit unit) {
                    super.onSuccess(unit);
                    Log.d(TAG,"success");
                }

                @Override
                public void onError(int code, @Nullable String message) {
                    super.onError(code, message);
                    Log.d(TAG,"error");
                }
            });
        }

        @Override
        public void onError(int code, @Nullable String message) {
            super.onError(code, message);
        }
    });
}
```

## 关闭预览

### 配置步骤

调用 `stopPreview` 方法关闭视频预览。

### 示例代码

```Java
previewRoomContext.getPreviewController().stopPreview(new NECallback2<Unit>() {
    @Override
    public void onSuccess(@Nullable Unit unit) {
        super.onSuccess(unit);
        Log.d(TAG,"success");
    }

    @Override
    public void onError(int code, @Nullable String message) {
        super.onError(code, message);
        Log.d(TAG,"error");
    }
});
```

## 切换摄像头

### 配置步骤

调用 `switchCamera` 方法切换摄像头。

::: note note
目前此接口是取反的逻辑，即若您本来使用的是前置摄像头，调用 `switchCamera` 方法后，设备开始用后置摄像头进行画面采集。
:::

### 示例代码

```Java
previewRoomContext.getPreviewController().switchCamera(new NECallback2<Unit>() {
    @Override
    public void onSuccess(@Nullable Unit unit) {
        super.onSuccess(unit);
        Log.d(TAG,"success");
    }

    @Override
    public void onError(int code, @Nullable String message) {
        super.onError(code, message);
        Log.d(TAG,"error");
    }
});
```

## API 参考

| 方法 | 功能描述 |
|:--|:--|
| [`previewRoom`](https://doc.yunxin.163.com/neroom/references/android/dokka/Latest/zh/html/com/netease/yunxin/kit/roomkit/api/service/NERoomService.html#previewRoom(com.netease.yunxin.kit.roomkit.api.service.NEPreviewRoomParams,com.netease.yunxin.kit.roomkit.api.service.NEPreviewRoomOptions,com.netease.yunxin.kit.roomkit.api.NECallback)) | 开启房间预览。|
| [`startPreview`](https://doc.yunxin.163.com/neroom/references/android/dokka/Latest/zh/html/com/netease/yunxin/kit/roomkit/api/NERoomRtcBaseController.html#startPreview(com.netease.yunxin.kit.roomkit.api.view.NERoomVideoView)) | 开启视频预览。|
| [`stopPreview`](https://doc.yunxin.163.com/neroom/references/android/dokka/Latest/zh/html/com/netease/yunxin/kit/roomkit/api/NERoomRtcBaseController.html#stopPreview(java.lang.Boolean)) | 关闭视频预览。|
| [`switchCamera`](https://doc.yunxin.163.com/neroom/references/android/dokka/Latest/zh/html/com/netease/yunxin/kit/roomkit/api/NERoomRtcBaseController.html#switchCamera()) | 切换摄像头。|
| [`setupLocalVideoRender`](https://doc.yunxin.163.com/neroom/references/android/dokka/Latest/zh/html/com/netease/yunxin/kit/roomkit/api/NERoomRtcBaseController.html#setupLocalVideoRender(com.netease.lava.api.IVideoRender)) | 设置本地视图。|